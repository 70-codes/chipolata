(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(t,n,e){"use strict";e.r(n);var r=e(2),u=e(3);const o=(t,n)=>{const e=t.createImageData(1,1);return e.data[0]=n,e.data[1]=n,e.data[2]=n,e.data[3]=255,e},i=t=>[!!t.x,!!t[1],!!t[2],!!t[3],!!t.q,!!t.w,!!t.e,!!t.a,!!t.s,!!t.d,!!t.z,!!t.c,!!t[4],!!t.r,!!t.f,!!t.v],c=(()=>{if(!window.AudioContext&&!window.webkitAudioContext)return null;const t=new(window.AudioContext||window.webkitAudioContext);return{oscillator:null,start(){this.oscillator||(this.oscillator=(t=>{const n=t.createOscillator();return n.type="sine",n.frequency.value=400,n.connect(t.destination),n})(t),this.oscillator.start())},stop(){this.oscillator&&(this.oscillator.stop(),this.oscillator=null)}}})(),f=((t,n,e,r,u)=>{t.width=n,t.height=e;const i=Math.min(r-40,10*n);t.style.width=i+"px",t.style.height=i/2+"px";const c=t.getContext("2d"),f=o(c,0),a=o(c,255);return{drawPixelAt(t,n,e){c.putImageData(t?a:f,n,e)}}})(document.getElementById("display"),64,32,screen.width,screen.height),a={};document.addEventListener("keydown",t=>{a[t.key]=!0}),document.addEventListener("keyup",t=>{a[t.key]=!1});fetch("./space-invaders.ch8").then(async t=>{const n=await t.arrayBuffer(),e=new r.a(new Uint8Array(n)),o=()=>{let t=!1;for(let n=0;n<15;n++)n%3&&e.update_keypad(i(a)),e.step(),e.should_redraw()&&(t=!0);if(t){const t=new Uint8Array(u.m.buffer,e.get_framebuffer_ptr(),2048);for(let n=0;n<64;n++)for(let e=0;e<32;e++)f.drawPixelAt(1==t[n+64*e],n,e)}e.should_beep()?c.start():c.stop(),e.update_timers(),requestAnimationFrame(o)};o()})},function(t,n,e){"use strict";(function(t){e.d(n,"a",(function(){return x})),e.d(n,"v",(function(){return v})),e.d(n,"u",(function(){return k})),e.d(n,"e",(function(){return _})),e.d(n,"l",(function(){return A})),e.d(n,"n",(function(){return E})),e.d(n,"q",(function(){return j})),e.d(n,"m",(function(){return q})),e.d(n,"c",(function(){return C})),e.d(n,"h",(function(){return O})),e.d(n,"s",(function(){return P})),e.d(n,"g",(function(){return I})),e.d(n,"b",(function(){return T})),e.d(n,"f",(function(){return D})),e.d(n,"j",(function(){return U})),e.d(n,"o",(function(){return B})),e.d(n,"k",(function(){return F})),e.d(n,"r",(function(){return J})),e.d(n,"i",(function(){return L})),e.d(n,"p",(function(){return M})),e.d(n,"d",(function(){return z})),e.d(n,"w",(function(){return R})),e.d(n,"t",(function(){return S}));var r=e(3);let u=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});u.decode();let o=null;function i(){return null!==o&&o.buffer===r.m.buffer||(o=new Uint8Array(r.m.buffer)),o}function c(t,n){return u.decode(i().subarray(t,t+n))}const f=new Array(32).fill(void 0);f.push(void 0,null,!0,!1);let a=f.length;function s(t){a===f.length&&f.push(f.length+1);const n=a;return a=f[n],f[n]=t,n}function d(t){return f[t]}function l(t){const n=d(t);return function(t){t<36||(f[t]=a,a=t)}(t),n}let p=0;function h(t,n){const e=n(1*t.length);return i().set(t,e/1),p=t.length,e}function w(t){return function(){try{return t.apply(this,arguments)}catch(t){r.b(s(t))}}}let y=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8");const b="function"==typeof y.encodeInto?function(t,n){return y.encodeInto(t,n)}:function(t,n){const e=y.encode(t);return n.set(e),{read:t.length,written:e.length}};let g=null;function m(){return null!==g&&g.buffer===r.m.buffer||(g=new Int32Array(r.m.buffer)),g}class x{static __wrap(t){const n=Object.create(x.prototype);return n.ptr=t,n}free(){const t=this.ptr;this.ptr=0,r.a(t)}constructor(t){var n=h(t,r.d),e=p,u=r.g(n,e);return x.__wrap(u)}update_keypad(t){var n=h(t,r.d),e=p;r.k(this.ptr,n,e)}step(){r.j(this.ptr)}should_redraw(){return 0!==r.i(this.ptr)}should_beep(){return 0!==r.h(this.ptr)}update_timers(){r.l(this.ptr)}get_framebuffer_ptr(){return r.f(this.ptr)}}const v=function(t,n){return s(c(t,n))},k=function(t){l(t)},_=w((function(t,n){d(t).getRandomValues(d(n))})),A=w((function(t,n,e){var r,u;d(t).randomFillSync((r=n,u=e,i().subarray(r/1,r/1+u)))})),E=w((function(){return s(self.self)})),j=function(){return s(t)},q=w((function(t,n,e){return s(d(t).require(c(n,e)))})),C=function(t){return s(d(t).crypto)},O=function(t){return s(d(t).msCrypto)},P=function(t){return void 0===d(t)},I=function(t){console.log(d(t))},T=function(t){return s(d(t).buffer)},D=function(t){return d(t).length},U=function(t){return s(new Uint8Array(d(t)))},B=function(t,n,e){d(t).set(d(n),e>>>0)},F=function(t){return s(new Uint8Array(t>>>0))},J=function(t,n,e){return s(d(t).subarray(n>>>0,e>>>0))},L=function(){return s(new Error)},M=function(t,n){var e=function(t,n,e){if(void 0===e){const e=y.encode(t),r=n(e.length);return i().subarray(r,r+e.length).set(e),p=e.length,r}let r=t.length,u=n(r);const o=i();let c=0;for(;c<r;c++){const n=t.charCodeAt(c);if(n>127)break;o[u+c]=n}if(c!==r){0!==c&&(t=t.slice(c)),u=e(u,r,r=c+3*t.length);const n=i().subarray(u+c,u+r);c+=b(t,n).written}return p=c,u}(d(n).stack,r.d,r.e),u=p;m()[t/4+1]=u,m()[t/4+0]=e},z=function(t,n){try{console.error(c(t,n))}finally{r.c(t,n)}},R=function(t,n){throw new Error(c(t,n))},S=function(){return s(r.m)}}).call(this,e(4)(t))},function(t,n,e){"use strict";var r=e.w[t.i];t.exports=r;e(2);r.n()},function(t,n){t.exports=function(t){if(!t.webpackPolyfill){var n=Object.create(t);n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(n,"exports",{enumerable:!0}),n.webpackPolyfill=1}return n}}]]);